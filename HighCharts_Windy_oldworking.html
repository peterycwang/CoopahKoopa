<!DOCTYPE html>
<html>
<head>
 <script src="http://code.jquery.com/jquery-latest.min.js"></script>
 <script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/highcharts-more.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>   

<script>
    $(document).ready(function(){
        //highCharts function
            var drawChart = function() {
                $('#container').highcharts({

                    chart: {
                        type: 'bubble',
                        zoomType: 'xy'
                    },

                    title: {
                        text: 'Highcharts Bubbles'
                    },

                    series: [{  // data accepts arrays of arrays of 3 objects.
                        data: [[97, 36, 79], [94, 74, 60], [68, 76, 58], [64, 87, 56], [68, 27, 73], [74, 99, 42], [7, 93, 87], [51, 69, 40], [38, 23, 33], [57, 86, 31]]
                    }, {
                        data: [[25, 10, 87], [2, 75, 59], [11, 54, 8], [86, 55, 93], [5, 3, 58], [90, 63, 44], [91, 33, 17], [97, 3, 56], [15, 67, 48], [54, 25, 81]]
                    }, {
                        data: [[47, 47, 21], [20, 12, 4], [6, 76, 91], [38, 30, 60], [57, 98, 64], [61, 17, 80], [83, 60, 13], [67, 78, 75], [64, 12, 10], [30, 77, 82]]
                    }]
                });
            };
        // array of websites, cities across the U.S.
        var cities = ["NY/Manhattan", "CA/Los_Angeles", "IL/Chicago", "TX/Houston", "PA/Philadelphia", "AZ/Phoenix", "FL/Jacksonville", "IN/Indianapolis", "OH/Columbus", "NC/Charlotte", "MI/Detroit", "TN/Memphis", "MA/Boston", "WA/Seattle", "DC/Washington"];
        var cityURLs = [];

        for(var i=0; i<= 14; i++){  //creating an array of the city urls to use with getJSON
        var tempURL = "http://cooper-union-weather-proxy.herokuapp.com/weather/" + cities[i];
        cityURLs.push(tempURL);
        };
        
        var positions = [];
        var winddata = [];
        for(var i=0; i<=14; i++){
            $.getJSON(cityURLs[i], function(response){   // accessing api data through response var object
                positions[i]= [];

                realTemp = response.current_observation.temp_f;
                feelsTemp = Number(response.current_observation.feelslike_f);
                windSpeed = response.current_observation.wind_mph;

                // console.log(windSpeed + " " + realTemp + " " + feelsTemp);    // using "feelslike" so windchill temps without wind still have existing temperatures rather than NA
                positions[i].push(realTemp);
                positions[i].push(feelsTemp);
                positions[i].push(windSpeed);
                    winddata.push(positions[i]);
                    console.log(positions[i]);
                    console.log(winddata);

                if(i === 14) { 
                    console.log("hi");
                    //drawChart(positions);

                }; // closes if loop

            });     // closes getJSON


        }; // closes for loop with getJSONs 


        drawChart();
        // define drawChart inside readyfunction and script tag


        // end outside code
        });
    </script>

</head>

<div id="container" style="height: 400px; min-width: 310px; max-width: 600px; margin: 0 auto"></div>

</html>